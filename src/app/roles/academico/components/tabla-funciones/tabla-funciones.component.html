<div class="p-6 w-full h-full bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700">
    <!-- Sección con informes asignados -->
    @if (asignado) {
      <div class="p-3">
        <div class="mt-5 flex justify-between items-center mb-6">
          <h2 class="text-lg sm:text-2xl font-semibold text-gray-900 dark:text-white">Listado de Informes Asignados</h2>
    
          <!-- Spinner en la parte superior derecha -->
          @if (cargandoDescarga) {
            <div class="flex items-center me-5">
              <div class="w-7 h-7 border-4 border-t-transparent border-blue-500 dark:border-blue-400 border-solid rounded-full animate-spin"></div>
            </div>
          }
        </div>
    
        <p-table
          [value]="data"
          [paginator]="true"
          [rows]="5"
          [responsiveLayout]="'scroll'"
          styleClass="shadow-sm border dark:border-gray-700 rounded-lg"
          tableStyleClass="w-full text-sm text-left text-gray-800 dark:text-gray-200 bg-white dark:bg-gray-800"
        >
          <ng-template pTemplate="header">
            <tr>
              <th class="px-6 py-3 text-center bg-blue-500 dark:bg-blue-600 text-white">Alumno</th>
              <th class="px-6 py-3 text-center bg-blue-500 dark:bg-blue-600 text-white">Práctica</th>
              <th class="px-6 py-3 text-center bg-blue-500 dark:bg-blue-600 text-white">Días Restantes</th>
              <th class="px-6 py-3 text-center bg-blue-500 dark:bg-blue-600 text-white">Estado</th>
              <th class="px-6 py-3 text-center bg-blue-500 dark:bg-blue-600 text-white">Intentos Restantes</th>
              <th class="px-6 py-3 text-center bg-blue-500 dark:bg-blue-600 text-white">Acción</th>
            </tr>
          </ng-template>

          <ng-template pTemplate="body" let-informe>
            <tr class="h-14 border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50">
              <td class="px-6 py-2 font-medium text-gray-900 dark:text-white text-center">{{ informe.nombre_alumno }}</td>
              <td class="px-6 py-2 text-gray-700 dark:text-gray-300 text-center">{{ tipoPractica[informe.tipo_practica] }}</td>
              <td class="px-6 py-2 text-gray-600 dark:text-gray-400 text-center">
                {{ informe.estado_informe === 'APROBADA' || informe.estado_informe === 'DESAPROBADA' ? 'Revisión Enviada' : informe.dias_para_revision }}
              </td>
              <td class="px-6 py-2 text-gray-600 dark:text-gray-400 text-center">{{ textoEstadoInforme[informe.estado_informe] }}</td>
              <td class="px-6 py-2 text-gray-600 dark:text-gray-400 text-center">{{ informe.intentos }}</td>
              <td class="px-6 py-2 text-center">
                <div>
                  @if (informe.estado_informe === 'REVISION') {
                    <button
                      class="w-full bg-blue-500 dark:bg-blue-600 text-white px-2 py-2 text-sm rounded-md hover:bg-blue-600 dark:hover:bg-blue-700 transition-colors duration-200"
                      (click)="revision(informe.id_practica)"
                    >
                      Revisar
                    </button>
                  }
                  @if (informe.estado_informe === 'APROBADA' || informe.estado_informe === 'DESAPROBADA') {
                    <button
                      class="w-full bg-red-500 dark:bg-red-600 text-white px-2 py-2 text-sm rounded-md hover:bg-red-600 dark:hover:bg-red-700 transition-colors duration-200 flex items-center justify-center"
                    >
                      <span class="truncate flex items-center justify-center" (click)="descargarPDF(informe.id_practica, informe.id_informe_evaluacion, decodedToken.id_usuario)">
                        Descargar
                        <i class="pi pi-file-pdf ml-2 text-xl"></i>
                      </span>
                    </button>
                  }
                </div>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    }
  
    <!-- Sección si no hay informes asignados -->
    @if (!asignado) {
      <div class="flex justify-center items-center h-[20rem] sm:h-[30rem] bg-gradient-to-r from-blue-50 to-white dark:from-blue-900/30 dark:to-gray-800 rounded-2xl shadow-lg">
        <div class="text-center">
          <img src="departamento_ici/8878488.svg" alt="imagen_relajese" loading="lazy" class="w-24 sm:w-40 mx-auto mb-6">
          <h1 class="text-xl sm:text-2xl font-bold text-gray-800 dark:text-white">Relájese</h1>
          <p class="mt-4 text-gray-500 dark:text-gray-400">Actualmente no tiene informes asignados.</p>
        </div>
      </div>
    }
</div>  

<app-pdfgenerator
  *ngIf="mostrarPdfComponent"
  [idPractica]="idPracticaSeleccionada"
  [idInformeEvaluativo]="idInformeSeleccionado"
  [idDocente]="idDocenteSeleccionado"
  (pdfGenerado)="onPdfGenerado()"
  [hidden]="true"
>
</app-pdfgenerator>