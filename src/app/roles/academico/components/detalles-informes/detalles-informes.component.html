<app-header></app-header>

<div class="container mx-auto p-4 space-y-6">
  <!-- Título del informe -->
  <h1 class="text-2xl font-bold text-gray-800">Revisión de Informe de Práctica</h1>

  <!-- Información del supervisor y empresa -->
  <div>
    <h2 class="text-lg font-semibold text-gray-700">Información del Supervisor y Empresa</h2>
    <div class="border rounded-md p-4 shadow">
      <p><strong>Supervisor:</strong> {{ informeConfidencial?.supervisor.usuario.nombre }}</p>
      <p><strong>Empresa:</strong> {{ informeConfidencial?.supervisor.empresa.nombre_razon_social }}</p>
      <p><strong>Rubro:</strong> {{ informeConfidencial?.supervisor.empresa.rubro }}</p>
    </div>
  </div>

  <!-- Visualizador de PDF -->
  <div>
    <h2 class="text-lg font-semibold text-gray-700">Informe de Práctica</h2>
    <div class="border rounded-md p-4 shadow">
      <iframe
        [src]="pdfUrl"
        class="w-full h-[1000px] border rounded-md"
      ></iframe>
      <!-- Botón para descargar el PDF -->
      <button
        (click)="descargarPdf()"
        class="mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"
      >
        Descargar Informe
      </button>
    </div>
  </div>

  <!-- Cuestionario de preguntas/respuestas -->
  <div>
    <h2 class="text-lg font-semibold text-gray-700">Informe Confidencial</h2>
    <div class="space-y-4">
      <div
        *ngFor="let respuesta of respuestasConfidenciales; let i = index"
        class="border rounded-md p-4 shadow"
      >
        <p class="font-medium text-gray-800">Pregunta {{ i + 1 }}:</p>
        <p class="text-gray-600">{{ respuesta.pregunta }}</p>
        <p class="mt-2 text-gray-700 font-semibold">Puntos otorgados:</p>
        <p class="text-gray-600">{{ respuesta.puntos || 'Sin calificación' }}</p>
      </div>
    </div>
  </div>
  

  <!-- Subir archivo y comentario -->
  <div>
    <h2 class="text-lg font-semibold text-gray-700">Subir Archivo y Comentario</h2>
    <div class="space-y-4 border rounded-md p-4 shadow">
      <div>
        <label
          for="archivo"
          class="block text-gray-600 font-medium mb-1"
        >Seleccionar archivo:</label>
        <input
          type="file"
          id="archivo"
          (change)="onFileSelected($event)"
          class="w-full border px-4 py-2 rounded"
        />
      </div>
      <div>
        <label
          for="comentario"
          class="block text-gray-600 font-medium mb-1"
        >Comentario:</label>
        <textarea
          id="comentario"
          [(ngModel)]="comentario"
          class="w-full border px-4 py-2 rounded"
          rows="4"
          placeholder="Escribe tu comentario aquí..."
        ></textarea>
      </div>
    </div>
  </div>

  <!-- Botón de enviar -->
  <div class="text-right">
    <button
      (click)="enviarRevision()"
      class="px-6 py-2 bg-green-500 text-white rounded hover:bg-green-600"
    >
      Enviar Revisión
    </button>
  </div>
</div>
